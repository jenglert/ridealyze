<!DOCTYPE html>
<html>

<head>
    <title>Ridealyze</title>
    <meta name="viewport" content="initial-scale=1.0">
    <meta charset="utf-8">
    <style>
        /* Always set the map height explicitly to define the size of the div
       * element that contains the map. */

        #map {
            height: 100%;
        }

        /* Optional: Makes the sample page fill the window. */

        html,
        body {
            height: 100%;
            margin: 0;
            padding: 0;
        }
    </style>
</head>

<body>
    <div id="map"></div>
    <script>
        var map;
        function initMap() {
            map = new google.maps.Map(document.getElementById('map'), {
                center: <%- center.googleString() %>,
                zoom: 11,
                mapTypeId: google.maps.MapTypeId.TERRAIN
            });

            map.fitBounds(new google.maps.LatLngBounds(<%- min.googleString() %>, <%- max.googleString() %>));

            var ne = new google.maps.Marker({position: <%- max.googleString() %>, map: map});
            var sw = new google.maps.Marker({position: <%- min.googleString() %>, map: map});

            var arrowSvg = "M1.2959183673469354,1.2551020408163218L12.887755102040806,7.214285714285712 M12.887755102040806,7.214285714285712L1.867346938775505,13.255102040816322";
            var icon = {
                path: arrowSvg, 
                rotation: 270, 
                strokeOpacity: 0.75, 
                anchor: new google.maps.Point(8, 8)}

            <% for (var bandCnt = 0; bandCnt < recordsByBand.length; bandCnt++) { 
                const bandRecordsStr = recordsByBand[bandCnt][1]; 
                const color = recordsByBand[bandCnt][0];
            %>
                var icons<%=bandCnt%> = {offset: '20px', repeat: '100px', icon: icon};
                var route<%=bandCnt%> = new google.maps.Polyline({map: map, strokeColor: '<%= color %>', icons: [ icons<%=bandCnt%> ], path: <%- bandRecordsStr %>});
            <% } %>
        }
    </script>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCMEw9t5thL99AE19k_SodGZRJ9vc_VHXY&callback=initMap" async
        defer></script>
</body>

</html>